/* ==========================================================================
   PUTRAFIBER — PRODUCT GALLERY FIX (v1.4)
   Fokus:
   - Matikan efek zoom/scale HANYA pada IMG (anti "autozoom")
   - Pastikan Swiper wrapper selalu flex & slides tidak menyusut
   - Thumbnails selalu terlihat (height dikunci)
   - TANPA override transform wrapper/slide (autoplay aman)
   -------------------------------------------------------------------------- */

/* Area galeri dasar */
.product-gallery { position: relative; width: 100%; max-width: 100%; overflow: hidden; box-sizing: border-box; }
.product-gallery .swiper { width: 100%; max-width: 100%; box-sizing: border-box; }

/* ====== CORE SWIPER SAFETY (jangan biarkan theme override) ====== */
.product-gallery .swiper-wrapper {
  display: flex !important;          /* Swiper butuh flex */
  align-items: stretch;
}

:is(.product-gallery, .portfolio-gallery) .swiper-slide {
  flex-shrink: 0 !important;         /* jangan menyusut, biar bisa scroll horizontal */
  box-sizing: border-box;
}

/* Slide utama: lebar aman */
:is(.product-gallery-slider, .portfolio-gallery-slider) .swiper-slide { width: 100%; min-width: 100%; }

/* ====== ANTI ZOOM: target IMG saja, bukan wrapper/slide ====== */
:is(.product-gallery, .portfolio-gallery) .swiper-slide img,
:is(.product-gallery, .portfolio-gallery) .swiper-slide .gallery-image,
:is(.product-gallery, .portfolio-gallery) .gallery-image {
  display: block;
  width: 100% !important;
  height: auto !important;
  max-width: 100% !important;
  object-fit: contain;

  transform: none !important;
  -webkit-transform: none !important;
  animation: none !important;
  transition: none !important;
  will-change: auto !important;
}

/* Jika parent melakukan hover-zoom ke IMG anak, netralkan juga */
:is(.product-gallery, .portfolio-gallery) :is(.gallery-item, .swiper-slide, figure, a, div):hover > img,
:is(.product-gallery, .portfolio-gallery) :is(.gallery-item, .swiper-slide, figure, a, div):hover .gallery-image {
  transform: none !important;
  -webkit-transform: none !important;
  animation: none !important;
}

/* Tangkal utilitas scale-* di IMG */
:is(.product-gallery, .portfolio-gallery) img[class*="scale"],
:is(.product-gallery, .portfolio-gallery) img[class*="hover:scale"],
:is(.product-gallery, .portfolio-gallery) .gallery-image[class*="scale"],
:is(.product-gallery, .portfolio-gallery) .gallery-image[class*="hover:scale"] {
  transform: none !important;
}

/* ====== THUMBNAIL BAR — selalu tampil ====== */
:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) { margin-top: 12px; padding: 4px 0; }
:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-wrapper { align-items: center; }

:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-slide {
  width: auto !important;            /* biar bisa muat beberapa thumb */
  flex: 0 0 auto !important;         /* jangan melebar atau menyusut */
  opacity: 0.6;
  transition: opacity .2s ease;
  cursor: pointer;
}

:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-slide-thumb-active,
:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-slide:hover { opacity: 1; }

/* Ukuran thumbnail konsisten (anti-collapse) */
:is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-slide img {
  display: block;
  height: 72px;                      /* kunci tinggi agar container punya tinggi */
  width: auto;
  object-fit: cover;
}
@media (max-width: 640px) { :is(.product-gallery-thumbs, .portfolio-gallery-thumbs) .swiper-slide img { height: 56px; } }

/* Perlindungan dasar */
:is(.product-gallery, .portfolio-gallery) img { max-width: 100% !important; height: auto !important; }
:is(.product-gallery, .portfolio-gallery) .gallery-item { display: block; width: 100%; }
